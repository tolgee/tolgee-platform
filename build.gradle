if (rootProject.findProject(':ee-app') != null) {
    finalizedBy.add(project(':ee-app').tasks.findByName("diffChangelog"))
} else {
    println "Note: :ee-app project is not available, skipping diffChangelog task"
}

allprojects {
    tasks.withType(JavaCompile) {
        options.incremental = true
        options.fork = true
        options.forkOptions.memoryMaximumSize = "1g"
    }
    
    tasks.withType(Test) {
        // Enable JVM forking for tests
        maxParallelForks = Runtime.runtime.availableProcessors().intdiv(2) ?: 1
        // Increase heap size for tests
        maxHeapSize = "1g"
    }
}